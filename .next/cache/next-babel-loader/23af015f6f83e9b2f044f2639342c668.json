{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport AdminLayout from '../../components/layouts/AdminLayout';\nimport authRoute from '../../components/HOC/authRoute';\nimport { connect } from 'react-redux';\nimport { DeleteMessage } from '../../store/action';\nimport { getCookies } from '../../lib/utils';\n\nclass AdminMessages extends Component {\n  static async getInitialProps({\n    req\n  }) {\n    let messagesData;\n    let reqCooks = getCookies(req);\n\n    try {\n      const response = await axios.get(`http://localhost:3000/api/v1/messages`, {\n        headers: {\n          'authorization': `Bearer ${reqCooks}`\n        }\n      });\n      messagesData = response.data;\n    } catch (error) {\n      console.log(error);\n    }\n\n    return {\n      messagesData\n    };\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"showMessages\", messages => messages ? messages.map(message => __jsx(\"div\", {\n      className: \"item\",\n      key: message._id\n    }, __jsx(\"div\", {\n      className: \"delete_btn\",\n      onClick: () => this.deleteMessageHandler(message._id)\n    }, \"X\"), __jsx(\"div\", {\n      className: \"tag\"\n    }, __jsx(\"span\", null, \"Name:\"), message.name), __jsx(\"div\", {\n      className: \"tag\"\n    }, __jsx(\"span\", null, \"Email:\"), message.email), __jsx(\"div\", {\n      className: \"msg_wrap\"\n    }, __jsx(\"div\", {\n      className: \"tag\"\n    }, __jsx(\"span\", null, \"Message:\")), __jsx(\"div\", null, message.message)))) : null);\n\n    console.log(this.props);\n    this.state = {\n      messages: this.props.messagesData\n    };\n  } // deleteMessageHandler = (_id) => {\n  //     this.props.dispatch(DeleteMessage(_id)).then(() => {\n  //         ///\n  //     })\n  // }\n\n\n  render() {\n    return __jsx(AdminLayout, {\n      sectionName: \"Messages\"\n    }, __jsx(\"div\", {\n      className: \"messages_container\"\n    }, this.showMessages(this.state.messages)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    msg: state.msg\n  };\n};\n\nexport default connect(mapStateToProps)(authRoute(AdminMessages));","map":{"version":3,"sources":["/Users/disharjayantha/Desktop/projects,practise/Nextjs-PizzaApp/pages/admin/messages.js"],"names":["React","Component","axios","AdminLayout","authRoute","connect","DeleteMessage","getCookies","AdminMessages","getInitialProps","req","messagesData","reqCooks","response","get","headers","data","error","console","log","constructor","props","messages","map","message","_id","deleteMessageHandler","name","email","state","render","showMessages","mapStateToProps","msg"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,sCAAxB;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AAEA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,aAAT,QAA8B,oBAA9B;AAEA,SAAQC,UAAR,QAAyB,iBAAzB;;AAEA,MAAMC,aAAN,SAA4BP,SAA5B,CAAsC;AAElC,eAAaQ,eAAb,CAA6B;AAACC,IAAAA;AAAD,GAA7B,EAAoC;AAChC,QAAIC,YAAJ;AACA,QAAIC,QAAQ,GAAGL,UAAU,CAACG,GAAD,CAAzB;;AAEA,QAAI;AACA,YAAMG,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAW,uCAAX,EAAmD;AACtEC,QAAAA,OAAO,EAAE;AACL,2BAAkB,UAASH,QAAS;AAD/B;AAD6D,OAAnD,CAAvB;AAKAD,MAAAA,YAAY,GAAGE,QAAQ,CAACG,IAAxB;AACH,KAPD,CAOE,OAAMC,KAAN,EAAa;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH;;AAED,WAAO;AACHN,MAAAA;AADG,KAAP;AAGH;;AAEDS,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,0CAcHC,QAAD,IACXA,QAAQ,GACJA,QAAQ,CAACC,GAAT,CAAcC,OAAD,IACT;AAAK,MAAA,SAAS,EAAC,MAAf;AAAsB,MAAA,GAAG,EAAEA,OAAO,CAACC;AAAnC,OACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,OAAO,EAAE,MAAM,KAAKC,oBAAL,CAA0BF,OAAO,CAACC,GAAlC;AAA3C,WADJ,EAII;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,4BADJ,EAEKD,OAAO,CAACG,IAFb,CAJJ,EAQI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,6BADJ,EAEKH,OAAO,CAACI,KAFb,CARJ,EAYI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,+BADJ,CADJ,EAII,mBACKJ,OAAO,CAACA,OADb,CAJJ,CAZJ,CADJ,CADI,GAyBR,IAxCe;;AAEfN,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKE,KAAjB;AACA,SAAKQ,KAAL,GAAa;AACTP,MAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWV;AADZ,KAAb;AAGH,GA5BiC,CA8BlC;AACA;AACA;AACA;AACA;;;AA+BAmB,EAAAA,MAAM,GAAG;AACL,WACI,MAAC,WAAD;AAAa,MAAA,WAAW,EAAC;AAAzB,OACI;AAAK,MAAA,SAAS,EAAC;AAAf,OACK,KAAKC,YAAL,CAAkB,KAAKF,KAAL,CAAWP,QAA7B,CADL,CADJ,CADJ;AAOH;;AAzEiC;;AA4EtC,MAAMU,eAAe,GAAIH,KAAD,IAAW;AAC/B,SAAO;AACHI,IAAAA,GAAG,EAAEJ,KAAK,CAACI;AADR,GAAP;AAGH,CAJD;;AAMA,eAAe5B,OAAO,CAAC2B,eAAD,CAAP,CAAyB5B,SAAS,CAACI,aAAD,CAAlC,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport AdminLayout from '../../components/layouts/AdminLayout'\nimport authRoute from '../../components/HOC/authRoute'\n\nimport { connect } from 'react-redux'\nimport { DeleteMessage } from '../../store/action'\n\nimport {getCookies} from '../../lib/utils'\n\nclass AdminMessages extends Component {\n\n    static async getInitialProps({req}) {\n        let messagesData\n        let reqCooks = getCookies(req)\n\n        try {\n            const response = await axios.get(`http://localhost:3000/api/v1/messages`, {\n                headers: {\n                    'authorization': `Bearer ${reqCooks}`\n                }\n            })\n            messagesData = response.data\n        } catch(error) {\n            console.log(error)\n        }\n\n        return {\n            messagesData\n        }\n    }\n\n    constructor(props) {\n        super(props)\n        console.log(this.props)\n        this.state = {\n            messages: this.props.messagesData\n        }\n    }\n\n    // deleteMessageHandler = (_id) => {\n    //     this.props.dispatch(DeleteMessage(_id)).then(() => {\n    //         ///\n    //     })\n    // }\n\n    showMessages = (messages) => (\n        messages ?\n            messages.map((message) => (\n                <div className=\"item\" key={message._id}>\n                    <div className=\"delete_btn\" onClick={() => this.deleteMessageHandler(message._id)}>\n                        X\n                    </div>\n                    <div className=\"tag\">\n                        <span>Name:</span>\n                        {message.name}\n                    </div>\n                    <div className=\"tag\">\n                        <span>Email:</span>\n                        {message.email}\n                    </div>\n                    <div className=\"msg_wrap\">\n                        <div className=\"tag\">\n                            <span>Message:</span>\n                        </div>\n                        <div>\n                            {message.message}\n                        </div>\n                    </div>\n                </div>\n            ))\n        :\n        null\n    )\n\n    render() {\n        return(\n            <AdminLayout sectionName=\"Messages\">\n                <div className=\"messages_container\">\n                    {this.showMessages(this.state.messages)}\n                </div>\n            </AdminLayout>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        msg: state.msg\n    }\n}\n\nexport default connect(mapStateToProps)(authRoute(AdminMessages))"]},"metadata":{},"sourceType":"module"}